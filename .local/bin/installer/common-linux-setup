#!/bin/sh

# TODO
# change audiosw sink-name
# chnage record audio-output
# add pswd in pass
# change btch mac-add
# change sys-status check-updates according to ur pkg-manager
# ucmnt alias for ur pkg-manager
# change git config username
# change wttr location
# add notify-sound if u want
# uncmt source for tty-colors in zshrc if want

# Change DNS server to cloudflare
sudo cat <<EOF | sudo tee /etc/resolv.conf
nameserver 1.1.1.1
nameserver 8.8.8.8
EOF

# Better for laptops [ Todo: find for debian ]
sudo cat <<EOF | sudo tee /etc/NetworkManager/conf.d/wifi-powersave.conf
[connection]
wifi.powersave = 2
EOF

# Nvidia driver and mkinitcpio
# Modules_to_add="nvidia nvidia_modeset nvidia_uvm nvidia_drm"
# sed -i "s/^MODULES=.*/MODULES=($Modules_to_add)/" /etc/mkinitcpio.conf
# sudo mkinitcpio -p linux

# Display Asterisks while entering pswd
# sudo su root -c "echo Defaults pwfeedback >> /etc/sudoers"

# Remove Firefox ~/.pulse-cookie
sudo su root -c "echo cookie-file = /tmp/pulse-cookie >> /etc/pulse/client.conf"

# Turn off mitigations
# /etc/default/grub >> GRUB_CMDLINE_LINUX*="rhgb quiet mitigations=off"

# Fix screen tearing for nvidia-settings
# nvidia-settings --assign CurrentMetaMode="nvidia-auto-select +0+0 {ForceFullCompositionPipeline=On}"

# Enable TouchPad Tapping for Laptop
sudo mkdir /etc/X11/xorg.conf.d && sudo touch /etc/X11/xorg.conf.d/30-touchpad.conf
sudo cat <<EOF | sudo tee /etc/X11/xorg.conf.d/30-touchpad.conf
Section "InputClass"
       Identifier "devname"
       Driver "libinput"
               Option "Tapping" "on"
               Option "NaturalScrolling" "true"
EndSection
EOF

# Use dash symlink for /bin/sh  - do this carefully it can break whole system
# readlink /bin/sh  - check system shell
# install checkbashisms dash
# find /usr/bin/ -type f -perm -o=r -print0 | xargs -0r gawk '/^#!.*( |[/])sh/{printf "%s\0", FILENAME} {nextfile}' | xargs -0r checkbashisms  - check if all your /usr/bin script is compatible with dash or not
# sudo ln -sfT dash /usr/bin/sh  - change dash as system shell, only run this, after you've corrected all your script for dash
# sudo vim /usr/share/libalpm/hooks/bash-update.hook >> http://0x0.st/okdY.sh || install dashbinsh from AUR  - fix overwriting symlink after update bash

# Replace sudo with doas
# install opendoas
# echo 'permit persist keepenv :wheel' | sudo tee -a /etc/doas.conf
# alias sudo='doas'
# -- Disable sudo --
# cmnt in - EDITOR=vim visudo
# User privilege specification
# allow memebers of group wheel to exec any command

# Encrypt home dir
# -i ecryptfs-utils cryptsetup
# use this when u get laptop

# sudo vim /etc/hosts           ( blk sites )
