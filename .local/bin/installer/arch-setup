#!/bin/sh

# sudo pacman -Syyu
cp -r ~/dotfiles/{.bashrc,.bash_profile,.profile,.zprofile,.xprofile,.xinitrc,.imwheelrc,.vimrc} ~/
mkdir "$HOME/.local/bin"
cp -r ~/dotfiles/.local/bin/* ~/.local/bin && cp -r ~/dotfiles/.local/share/* ~/.local/share && cp -r ~/dotfiles/.config/. ~/.config
chmod -R +x ~/.config/bspwm/ ~/.config/polybar/launch.sh ~/.config/sxhkd/sxhkd.sh ~/.local/bin/ ~/.config/sxiv/ ~/.config/lf/{scope,cleaner}

mkdir ~/{desk,dox,dl,music,vids,pix,templates,pub,code,imp}

# Maple
mver="v6.3"
wget https://github.com/subframe7536/Maple-font/releases/download/$mver/MapleMono-NF.zip
yes | sudo unzip MapleMono-NF.zip -d /usr/share/fonts/TTF

# Suckless
git clone https://github.com/LukeSmithxyz/st.git ~/dl/st
cd ~/dl/st && sudo make clean install

git clone https://github.com/LukeSmithxyz/dmenu.git ~/dl/dmenu
cd ~/dl/dmenu && sudo make clean install

# My nvim config
git clone https://github.com/sayanta01/nvim ~/.config/nvim

# Tpm
git clone https://github.com/tmux-plugins/tpm ~/.config/tmux/plugins/tpm

# Themes
git clone https://github.com/sayanta01/Papirus-FlatMix ~/.local/share/icons/Papirus-FlatMix
sudo cp -r ~/.local/share/icons/Papirus-FlatMix/cursors /usr/share/icons/Adwaita
sudo cp -r ~/.local/share/icons/Papirus-FlatMix /usr/share/icons
sudo cp -r ~/.local/share/themes/* /usr/share/themes
sudo cp -r ~/.local/share/fonts /usr/share/fonts/local-fonts

sudo pacman -S --noconfirm ttf-jetbrains-mono-nerd ttf-joypixels ttf-font-awesome \
	noto-fonts noto-fonts-emoji noto-fonts-cjk ttf-roboto terminus-font \
	exa bat tldr fd ripgrep procs duf dust man fzf bash-completion starship zoxide \
	mate-calc firefox qutebrowser meld linux-headers \
	linux-lts linux-lts-headers kitty newsboat trash-cli neovim \
	neofetch htop cowsay libconfig gnome-keyring \
	bspwm polybar sxhkd rofi dunst libnotify \
	qt5ct qt6ct kvantum lxappearance xcape \
	playerctl pamixer pulsemixer pavucontrol mpd ncmpcpp dbus-python \
	dialog cmake wmname imwheel pass \
	wireless_tools net-tools nm-connection-editor network-manager-applet dnsutils iftop nmap \
	mpv mediainfo perl-image-exiftool ffmpegthumbnailer imagemagick maim sxiv xwallpaper ffmpeg python-pip python-pywal \
	unrar unzip zip p7zip tar engrampa \
	tree ncdu lf gvfs thunar thunar-archive-plugin thunar-media-tags-plugin \
	zathura zathura-pdf-mupdf ghostscript \
	zsh-syntax-highlighting zsh-completions zsh-autosuggestions \
	rsync wget curl aria2 yt-dlp transmission-cli jq \
	intel-ucode virtualbox-guest-utils \
	xdg-utils xdg-user-dirs xdo xclip xdotool wmctrl \
  gvfs-mtp gvfs-gphoto2 unclutter socat exfat-utils

# use PulseAudio
# sudo pacman -S pulseaudio pulseaudio-bluetooth
# use PipeWire
# sudo pacman -S pipewire pipewire-pulse wireplumber

# Display Manager
sudo pacman -S --noconfirm lightdm-gtk-greeter-settings grub-customizer
# lightdm-runit  ( artix )
# dm-tool switch-to-greeter
# move a img to /etc/lightdm for lightdm wallpaper
# echo 'background = /etc/lightdm/bg.jpg' | sudo tee -a /etc/lightdm/lightdm-gtk-greeter.conf

# Nvidia
# sudo pacman -S --noconfirm nvidia nvidia-settings opencl-nvidia nvtop glmark2

# GUI apps
sudo pacman -S --noconfirm scrcpy android-file-transfer android-tools stress bpytop blueman bluez-utils ntfs-3g \
	obs-studio audacity gimp inkscape virtualbox kdeconnect blender telegram-desktop
# sudo ln -s /etc/runit/sv/bluetoothd /run/runit/service

# Services
sudo pacman -S --noconfirm cronie-runit docker-runit openssh-runit libvirt-runit bluez-runit dbus-runit
# sudo pacman -S --noconfirm cronie docker openssh libvirt bluez ( arch )
sudo ln -s /etc/runit/sv/dbus /run/runit/service
sudo ln -s /etc/runit/sv/cronie /run/runit/service
sudo ln -s /run/runit/sv/docker /run/runit/service
sudo touch /run/runit/service/docker/down
sudo ln -s /etc/runit/sv/sshd /run/runit/service
sudo touch /run/runit/service/sshd/down

# VM
# sudo usermod -aG vboxusers $USER  # enable USB usage for Virtual-Box
sudo pacman -S --noconfirm qemu virt-manager bridge-utils dnsmasq openbsd-netcat ovmf swtpm
# qemu-arch-extra  ( arch )
# sudo ln -s /etc/runit/sv/virtlogd /run/runit/service  ( artix )
# sudo touch /run/runit/service/virtlogd/down  ( artix )
# sudo ln -s /etc/runit/sv/libvirtd /run/runit/service  ( artix )
# sudo touch /run/runit/service/libvirtd/down  ( artix )
# sudo systemctl enable --now libvirtd  ( arch )
# sudo vim /etc/libvirt/libvirtd.conf  #uncmnt line 81,104  ( arch )
# sudo usermod -aG libvirt $USER
# sudo systemctl restart libvirtd  ( arch )
# sudo virsh net-define /etc/libvirt/qemu/networks/default.xml
# sudo virsh net-autostart default

# AUR
git clone https://aur.archlinux.org/paru.git ~/.config/paru
cd ~/.config/paru && makepkg -si
yes | paru -S betterlockscreen xwinwrap-git colorpicker google-chrome simple-mtpfs \
	visual-studio-code-bin picom-ibhagwan-git powershell-bin ttyper cava anki-bin

# /etc/pacman.conf              ( uncheck 'ignorepkg' and put pkgname )

# Change Teletype font
sudo setfont /usr/share/kbd/consolefonts/ter-d16b.psf.gz
sudo su root -c "echo -e FONT='ter-d18b.psf.gz' >> /etc/vconsole.conf"

# Fix qt5ct
# echo 'QT_QPA_PLATFORMTHEME="qt5ct"' | sudo tee -a /etc/environment

# Fix bluetooth          & Get percentage of connected device
# ControllerMode = bredr & Experimental = true > /etc/bluetooth/main.conf

# Fix suckless utilities give XOpenIM failed error
# echo 'LANG=en_US.UTF-8
# LC_CTYPE=en_US.UTF-8
# LC_ADDRESS=en_US.UTF-8
# LC_IDENTIFICATION=en_US.UTF-8
# LC_MEASUREMENT=en_US.UTF-8
# LC_MONETARY=en_US.UTF-8
# LC_NAME=en_US.UTF-8
# LC_NUMERIC=en_US.UTF-8
# LC_PAPER=en_US.UTF-8
# LC_TELEPHONE=en_US.UTF-8
# LC_TIME=en_US.UTF-8' | sudo tee -a /etc/locale.conf
