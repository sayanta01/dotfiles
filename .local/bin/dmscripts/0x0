#!/bin/sh

menu=$(command -v dmenu >/dev/null 2>&1 && echo "dmenu -i" || echo "rofi -dmenu -i")
if command -v fd >/dev/null; then
  file=$(fd -t f | eval "$menu" -l 20 -p 'Upload File:')
else
  file=$(find . -maxdepth 10 -type f -not -path '*/\.*' 2>/dev/null | eval "$menu" -l 20 -p 'Upload File:')
fi

[ -n "$file" ] || exit
if [ -n "$WAYLAND_DISPLAY" ]; then
  curl -F "file=@$file" 0x0.st | wl-copy
else
  curl -F "file=@$file" 0x0.st | xclip -sel clip
fi
notify-send "0x0 ðŸ“Ž"
