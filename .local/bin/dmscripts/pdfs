#!/bin/sh

menu=$(command -v dmenu >/dev/null 2>&1 && echo "dmenu -i" || echo "rofi -dmenu -i")
if command -v fd >/dev/null 2>&1; then
	file=$(fd -e pdf . "$HOME")
else
	file=$(find "$HOME" -maxdepth 10 -type f -name "*.pdf" -not -path '*/\.*' 2>/dev/null)
fi

[ -n "$file" ] || exit

chosen_file=$(echo "$file" | eval "$menu -l 20 -p 'Choose PDF:'")
if [ -n "$chosen_file" ]; then
	zathura "$chosen_file" 2>/dev/null &
fi
