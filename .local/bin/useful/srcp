#!/bin/sh

conect() {
	ip=$(adb shell ip route | awk "{print $9}")
	adb tcpip 5555 && adb connect "$ip:5555"
}

audio() {
	scrcpy --no-video --no-window --no-playback \
		--audio-source=mic \
		--record="$HOME/Music/$(date +%b-%d-%H-%M-%S).opus"
}

bcam() {
	scrcpy --video-source=camera \
		--audio-source=mic \
		--camera-facing=back \
		--camera-fps=40 \
		--orientation=90
}

fcam() {
	scrcpy --video-source=camera \
		--audio-source=mic \
		--camera-facing=front \
		--camera-fps=40 \
		--orientation=90
}

game() {
	scrcpy --no-video --no-window --audio-output-buffer=5
}

if [ "$1" = "connect" ]; then
	connect
elif [ "$1" = "aud" ]; then
	aud
elif [ "$1" = "bcam" ]; then
	bcam
elif [ "$1" = "fcam" ]; then
	fcam
elif [ "$1" = "game" ]; then
	game
else
	exit 1
fi
