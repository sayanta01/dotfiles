#!/bin/sh

dir="$HOME/.local/share/walls"
BG="$(find "$dir" -name '*.jpg' -o -name '*.png' | shuf -n1)"

hypr_wall() {
	if pgrep swww-daemon >/dev/null; then
		swww img "$BG" --transition-fps 144 --transition-duration 1
	else
		swww-daemon && swww img "$BG" --transition-fps 144 --transition-duration 1
	fi
}

x11() {
	cat "$BG" > ~/.local/share/walls/wallpaper.jpg
	xwallpaper --zoom "$BG"
}

case "$XDG_CURRENT_DESKTOP" in
"Hyprland")
	hypr_wall
	;;
*)
	x11
	;;
esac
