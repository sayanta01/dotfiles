#!/bin/sh

# Defining the interval
INT=1

# Get the current total number of bytes received and transmitted
rx_bytes=$(cat /sys/class/net/*/statistics/rx_bytes | awk '{sum+=$1} END {print sum}')
tx_bytes=$(cat /sys/class/net/*/statistics/tx_bytes | awk '{sum+=$1} END {print sum}')

# Wait for the interval to elapse
sleep $INT

# Get the new total number of bytes received and transmitted
new_rx_bytes=$(cat /sys/class/net/*/statistics/rx_bytes | awk '{sum+=$1} END {print sum}')
new_tx_bytes=$(cat /sys/class/net/*/statistics/tx_bytes | awk '{sum+=$1} END {print sum}')

# Calculate the number of bytes received and transmitted during the interval
rx_speed=$(echo "scale=2; ($new_rx_bytes - $rx_bytes) / $INT" | bc)
tx_speed=$(echo "scale=2; ($new_tx_bytes - $tx_bytes) / $INT" | bc)

# Print the results
printf "%4sB üì° %4sB\n" "$(numfmt --to=iec "$rx_speed")" "$(numfmt --to=iec "$tx_speed")"
# üåêüì∂ Û∞ÄÇ ÔÉú

# --------------------------------------------------------------------------------------

# Defining the interval
# INT=1
#
# # Saving curren the RX and TX bytes to $RXSTART and $TXSTART variables
# RXSTART=$(cat /sys/class/net/[ew]*/statistics/rx_bytes)
# TXSTART=$(cat /sys/class/net/[ew]*/statistics/tx_bytes)
#
# # Waiting for $INT seconds
# sleep $INT
#
# # Saving the new RX and TX bytes to $RXEND and $TXEND variables
# RXEND=$(cat /sys/class/net/[ew]*/statistics/rx_bytes)
# TXEND=$(cat /sys/class/net/[ew]*/statistics/tx_bytes)
#
# # Calculation of the RX and TX speed in bytes per second
# RXBPS="$(((RXEND - RXSTART) / INT))"
# TXBPS="$(((TXEND - TXSTART) / INT))"
#
# # Returning the results
printf "%4sB üì° %4sB\n" "$(numfmt --to=iec "$rx_speed")" "$(numfmt --to=iec "$tx_speed")"
