#!/bin/bash

# action=$(echo -e "install Program\nremove Program\nRemove Waste\nUpdate System\nUpdate AUR" | dmenu -p "Software Manager " -i)
action=$(echo -e "install Program\nremove Program" | fzf)

case $action in
"install Program")
	package=$(pacman -Si |
		awk '/^Name/{name=$3} /^Download Size/{ds=$4$5} /^Repo/{repo=$3} /^Description/{sub(/^.{18}/,"", $0); print name, "["ds"]", "("repo") =>", $0} ' |
		sort -d | fzf | awk '{print $1}')
	# sort -d | dmenu -i -l 20 | awk '{print $1}')

	sudo pacman -S --noconfirm "$package"
	notify-send "😎 $package is installed 🎊 "
	;;
"remove Program")
	package=$(pacman -Qi |
		awk '/^Name/{name=$3} /^Installed Size/{ds=$4$5} /^Repo/{repo=$3} /^Description/{sub(/^.{18}/,"", $0); print name, "["ds"] =>", $0} ' |
		sort -d | fzf | awk '{print $1}')
	# sort -d | dmenu -i -l 25 | awk '{print $1}')

	sudo pacman -Rns --noconfirm "$package"
	notify-send "😈 $package is removed 😥"
	;;
# "Remove Waste")
#   sudo pacman -Rns "$(pacman -Qqtd)"
#   notify-send "☠️  Orphan packages deleted 😵"
#   ;;
# "Update System")
#   sudo pacman -Syyu --noconfirm
#   notify-send "🥳 System Update Complete 🎉"
#   ;;
# "Update AUR")
#   paru -Sua --noconfirm
#   notify-send "🎉 AUR Update Complete 🥳"
#   ;;
*)
	notify-send "😕 No Option Selected"
	;;
esac
