#!/bin/sh                                         

########## BSPWM ##########
sudo pacman -Syyu 
sudo pacman -S --noconfirm bspwm sxhkd rofi slock dunst lxappearance maim alsa-utils dbus-python

cp -r ~/dotfiles/{.icons,.themes,.imwheelrc} ~/
cp -r ~/dotfiles/.local/bin/scripts ~/.local/bin && cp -r ~/dotfiles/.local/share/* ~/.local/share
cp -r ~/dotfiles/.config/. ~/.config
chmod +x ~/.config/bspwm/bspwmrc ~/.config/polybar/launch.sh ~/.local/bin/scripts/* ~/.config/sxiv/exec/key-handler

mkdir ~/{desk,dox,dl,music,templates,pub,pix,vids,code,imp} 

git clone https://github.com/LukeSmithxyz/st.git ~/dl/st
cd ~/dl/st && sudo make clean install

git clone https://github.com/LukeSmithxyz/dmenu.git ~/dl/dmenu
cd ~/dl/dmenu && sudo make clean install

#git clone https://github.com/dracula/gtk.git ~/.themes/Dracula
sudo cp -r ~/.icons/PapirusFlatMix/cursors /usr/share/icons/Adwaita 
sudo cp -r ~/.icons/PapirusFlatMix /usr/share/icons
sudo cp -r ~/.themes/* /usr/share/themes

sudo pacman -S --noconfirm ttf-jetbrains-mono ttf-joypixels ttf-font-awesome \
     noto-fonts noto-fonts-emoji noto-fonts-cjk terminus-font \
     cargo linux-headers firefox \
     lsd exa bat wget curl fzf \
     neovim kitty ripgrep qt5ct kvantum \
     mate-calc reflector rsync \
     dialog cmake libconfig dash wmctrl wmname xdotool imwheel \
     pulseaudio pavucontrol pamixer playerctl mpd ncmpcpp \
     wireless_tools net-tools nm-connection-editor network-manager-applet \
     tree ncdu thunar thunar-archive-plugin ranger unrar unzip zip p7zip tar engrampa \
     htop neofetch bpytop zathura zathura-pdf-mupdf \
     speedtest-cli trash-cli yt-dlp transmission-cli \
     mpv imagemagick sxiv xwallpaper ffmpeg python-pip python-pywal \
     intel-ucode virtualbox-guest-utils \
     zsh-syntax-highlighting zsh-completions zsh-autosuggestions \
     jq xdg-utils xdg-user-dirs xorg xclip openssh cowsay
#sudo ln -s /etc/runit/sv/sshd /run/runit/service  ( artix )
#sudo touch /run/runit/service/sshd/down  ( artix )
#dash libnotify connman libconfig unclutter perl-image-exiftool  pipewire pipewire-pulse brightnessctl

#linux-lts linux-lts-headers
cargo install ttyper

sudo pacman -S lightdm-gtk-greeter lightdm-gtk-greeter-settings grub-customizer
#lightdm-runit  ( artix )
#lightdm  ( arch )
#dm-tool switch-to-greeter 
#sudo ln -s /etc/runit/sv/lightdm /run/runit/service  ( artix )
#sudo systemctl enable lightdm.service  ( arch )

sudo pacman -S --noconfirm nvidia nvidia-utils nvidia-settings opencl-nvidia \
scrcpy android-tools nvtop stress \
obs-studio audacity gimp inkscape virtualbox kdeconnect blender discord telegram-desktop \
bluez blueman bluez-utils ntfs-3g \
qemu virt-manager bridge-utils dnsmasq openbsd-netcat ovmf 
#bluez-runit libvirt-runit docker-runit openssh-runit ( artix )
#sudo touch /run/runit/service/docker/down
#qemu-arch-extra docker ( arch )

#sudo pacman -Rns xfce4-screensaver xfce4-clipman-plugin xfce4-weather-plugin xfce4-notes-plugin

##### Setup VirtManager in Arch #####
#sudo ln -s /etc/runit/sv/libvirtd /run/runit/service  ( artix )
#sudo touch /run/runit/service/libvirtd/down  ( artix )
#sudo systemctl enable --now libvirtd  ( arch )
#sudo vim /etc/libvirt/libvirtd.conf  #uncmnt line 81,104  ( arch )
#sudo usermod -aG libvirt bot
#sudo systemctl restart libvirtd  ( arch )
#sudo virsh net-define /etc/libvirt/qemu/networks/default.xml
#sudo virsh net-autostart default

git clone https://aur.archlinux.org/paru.git ~/paru
cd ~/paru && makepkg -si 
paru -S spotify-adblock notion-app google-chrome cava polybar preload visual-studio-code-bin
#plymouth-nosystemd libxft-bgra-git bluedevil pulseaudio-bluetooth  ( artix )
#plymouth ly  ( arch )

#sudo systemctl enable ly.service  ( arch )
#sudo systemctl enable fstrim.timer  ( arch )

sudo cat <<EOF | sudo tee /etc/resolv.conf 
nameserver 1.1.1.1
nameserver 8.8.8.8
EOF
 
#xdg-mime query filetype (file)  #check filetype
#xdg-mime query default (file/type)  #check default app of filetype
xdg-mime default sxiv.desktop image/jpeg
xdg-mime default sxiv.desktop image/jpg
xdg-mime default sxiv.desktop image/png
xdg-mime default inkscape.desktop image/svg+xml
xdg-mime default org.pwmt.zathura.desktop application/pdf

#Boost Linux
#sudo systemctl enable vboxservice  ( arch )
GRUB_CMDLINE_LINUX="rhgb quiet mitigations=off"

sudo setfont /usr/share/kbd/consolefonts/ter-d16b.psf.gz
sudo su root -c "echo -e FONT='ter-d16b.psf.gz' >> /etc/vconsole.conf"

#Display asterisks while entering passwd
# /etc/sudoers add Defaults    pwfeedback

# sudo vim /etc/hosts                     # blk sites
# /etc/pacman.conf  # uncheck ignorepkg and put pkgname
# export LC_CTYPE="en_GB.utf8"  ( fix suckless utilities give XOpenIM failed error )
# QT_QPA_PLATFORMTHEME="qt5ct" > /etc/environment  ( fix qt5ct )
# ControllerMode = bredr > /etc/bluetooth/main.conf  ( fix bluetooth )

