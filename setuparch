#!/bin/sh                                         

########## BSPWM ##########
sudo pacman -Syu 
sudo pacman -S --noconfirm bspwm sxhkd rofi slock dunst lxappearance maim alsa-utils dbus-python

cp -r ~/dotfiles/{.zshrc,.local,.fonts,.xinitrc,.imwheelrc,.xprofile,.zprofile,.tmux.conf,.icons,.themes} ~/
cp -r ~/dotfiles/.local/bin/* ~/.local/bin && cp -r ~/dotfiles/.local/share/* ~/.local/share
cp -r ~/dotfiles/.config/. ~/.config
chmod +x ~/.config/bspwm/bspwmrc ~/.config/polybar/launch.sh ~/.local/bin/* ~/.config/sxiv/exec/key-handler

git clone https://github.com/LukeSmithxyz/st.git ~/Downloads/st
cd ~/Downloads/st && sudo make clean install

git clone https://github.com/LukeSmithxyz/dmenu.git ~/Downloads/dmenu
cd ~/Downloads/dmenu && sudo make clean install

git clone https://github.com/dracula/gtk.git ~/.themes/Dracula
sudo cp -r ~/.icons/PapirusFlatMix/cursors /usr/share/icons/Adwaita 
sudo cp -r ~/.icons/PapirusFlatMix /usr/share/icons
sudo cp -r ~/.themes/* /usr/share/themes

sudo pacman -S --noconfirm ttf-jetbrains-mono ttf-font-awesome ttf-joypixels ttf-font-awesome \
     noto-fonts noto-fonts-emoji noto-fonts-cjk terminus-font \
     cargo linux-headers firefox \
     lsd exa bat wget curl fzf aria2 tmux kitty \
     neovim ripgrep qt5ct kvantum qt6ct \
     openssh mate-calc reflector \
     dialog cmake libconfig dash wmctrl imwheel \
     pipewire pulseaudio pavucontrol playerctl wmname \
     dhcpcd networkmanager wireless_tools net-tools nm-connection-editor \
     tree ncdu thunar thunar-archive-plugin ranger rsync unrar unzip zip p7zip tar  \
     fortune-mod htop neofetch bpytop zathura zathura-pdf-mupdf \
     speedtest-cli trash-cli yt-dlp transmission-cli \
     imagemagick sxiv xwallpaper ffmpeg python-pywal mpv \
     intel-ucode virtualbox-guest-utils python-pip xdotool \
     zsh-syntax-highlighting zsh-completions zsh-autosuggestions \
     unclutter jq xdg-user-dirs xorg xclip
     
#linux-lts linux-lts-headers
cargo install ttyper stylua

#sudo pacman -Sy lightdm lightdm-gtk-greeter lightdm-gtk-greeter-settings
##dm-tool switch-to-greeter
#sudo systemctl enable lightdm.service

#
sudo pacman -S --noconfirm nvidia nvidia-utils nvidia-settings opencl-nvidia os-prober \
scrcpy android-tools nvtop stress \
obs-studio audacity gimp inkscape virtualbox kdeconnect blender discord docker \
telegram-desktop xfce4 xfce4-goodies \
bluez bluez-utils blueman ntfs-3g \
virt-manager qemu bridge-utils dnsmasq openbsd-netcat ovmf qemu-arch-extra

#sudo systemctl enable vboxservice

sudo pacman -Rns xfce4-notifyd xfce4-screensaver \
xfce4-clipman-plugin xfce4-weather-plugin xfce-note-plugin

#sudo systemctl enable --now libvirtd
#sudo vim /etc/libvirt/libvirtd.conf  #uncmnt line 81,104
#sudo usermod -aG libvirt bot
#sudo systemctl restart libvirtd
#sudo virsh net-define /etc/libvirt/qemu/networks/default.xml
#sudo virsh net-autostart default

sudo systemctl enable bluetooth
sudo systemctl enable bluetooth.service
sudo systemctl enable fstrim.timer

git clone https://aur.archlinux.org/paru.git ~/paru
cd ~/paru && makepkg -si
paru -S --noconfirm spotify-adblock notion-app google-chrome cava ly polybar preload visual-studio-code-bin lightly-git

sudo systemctl enable ly.service 

mkdir ~/{Desktop,Documents,Downloads,Music,Pictures,Videos} 

sudo cat <<EOF | sudo tee /etc/resolv.conf 
nameserver 1.1.1.1
nameserver 8.8.8.8
EOF
 
#xdg-mime query filetype (file)  #check filetype
#xdg-mime query default (file/type)  #check default app of filetype
xdg-mime default sxiv.desktop image/jpeg
xdg-mime default sxiv.desktop image/jpg
xdg-mime default sxiv.desktop image/png
xdg-mime default inkscape.desktop image/svg+xml
xdg-mime default org.pwmt.zathura.desktop application/pdf

sudo setfont /usr/share/kbd/consolefonts/ter-c16b.psf.gz
sudo su root -c "echo -e FONT='Uni2-TerminusBold20x10.psf.gz' >> /etc/default/console-setup"

# uncmnt zsh plugins path for arch
# vim /etc/pacman.conf # uncheck ignorepkg and put pkgname
#QT_QPA_PLATFORMTHEME="qt5ct" > /etc/environment  ( fix qt5ct )
#ControllerMode = bredr > /etc/bluetooth/main.conf  ( fix bluetooth )
